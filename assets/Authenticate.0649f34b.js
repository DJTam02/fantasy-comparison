import{G as d,b as u}from"./authentication.e40a717e.js";import{a as c,d as l,g as p,b as m}from"./authentication.eda73ae4.js";import{d as _,r as w,h as T,c as R,b as h,a as y,F as E,j as f,g,e as b,o as C}from"./index.8a01ad82.js";const P=_({__name:"Authenticate",setup(U){const n=f(),r=g(),o=w({password:"",show:!1}),i=()=>{var t,a;console.log(d),console.log(o.password),console.log("grant_type=authorization_code&redirect_uri=oob&code="+n.query.code+"&client_id="+c()+"&client_secret="+l(p(),o.password));const s={grant_type:"authorization_code",redirect_uri:u,code:(a=(t=n.query.code)==null?void 0:t.toString())!=null?a:"",client_id:c(),client_secret:l(p(),o.password)};console.log(Object.keys(s).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(s[e])).join("&")),fetch({VITE_FANTASY_CONSUMER_KEY:"dj0yJmk9WjhCTllibWRPOVdRJmQ9WVdrOWNESkdTa2g0TlU4bWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTU4",VITE_FANTASY_SECRET_KEY:"U2FsdGVkX18njJF5Z7BKMoqKPbLcqh3SFDY/6CY2b8R2wbjJwjcODRd4AXUDIAcapzmUVqMlLsftETpvK5ds0Q==",VITE_FANTASY_APP_ID:"imTwuiTZ",BASE_URL:"/fantasy-comparison/",MODE:"production",DEV:!1,PROD:!0}.VUE_APP_API_URL+"/auth"+d,{method:"POST",headers:{Authorization:"Basic "+m(o.password),"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(s).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(s[e])).join("&"),redirect:"follow"}).then(e=>console.log("resp: ",e)).catch(e=>{console.log(e),r.push("/")})};return T(()=>{console.log(n.query.code),n.query.code||r.push("/")}),(s,t)=>{const a=b("v-text-field");return C(),R(E,null,[h(a,{modelValue:o.password,"onUpdate:modelValue":t[0]||(t[0]=e=>o.password=e),"append-icon":o.show?"mdi-eye":"mdi-eye-off",type:o.show?"text":"password",name:"password",label:"Password","onClick:append":t[1]||(t[1]=e=>o.show=!o.show),placeholder:"Password",variant:"outlined"},null,8,["modelValue","append-icon","type"]),y("button",{onClick:i},"Submit")],64)}}});export{P as default};
