import{G as c}from"./authentication.1fd37fb3.js";import{a as d,d as l,g as p,b as u}from"./authentication.eda73ae4.js";import{d as m,r as w,h as _,c as g,b as h,a as y,F as f,j as b,g as C,e as R,o as q}from"./index.35ece205.js";const k=m({__name:"Authenticate",setup(v){const s=b(),r=C(),o=w({password:"",show:!1}),i=()=>{var t,a;console.log(c),console.log(o.password),console.log("grant_type=authorization_code&redirect_uri=oob&code="+s.query.code+"&client_id="+d()+"&client_secret="+l(p(),o.password));const n={grant_type:"authorization_code",redirect_uri:"oob",code:(a=(t=s.query.code)==null?void 0:t.toString())!=null?a:"",client_id:d(),client_secret:l(p(),o.password)};console.log(Object.keys(n).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(n[e])).join("&")),fetch(c,{method:"POST",mode:"no-cors",headers:{Authorization:"Basic "+u(o.password),"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(n).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(n[e])).join("&"),redirect:"follow"}).then(e=>console.log(e)).catch(e=>{console.log(e),r.push("/")})};return _(()=>{console.log(s.query.code),s.query.code||r.push("/")}),(n,t)=>{const a=R("v-text-field");return q(),g(f,null,[h(a,{modelValue:o.password,"onUpdate:modelValue":t[0]||(t[0]=e=>o.password=e),"append-icon":o.show?"mdi-eye":"mdi-eye-off",type:o.show?"text":"password",name:"password",label:"Password","onClick:append":t[1]||(t[1]=e=>o.show=!o.show),placeholder:"Password",variant:"outlined"},null,8,["modelValue","append-icon","type"]),y("button",{onClick:i},"Submit")],64)}}});export{k as default};
