import{G as d}from"./authentication.1fd37fb3.js";import{a as c,d as l,g as i,b as u}from"./authentication.1a10a14e.js";import{d as m,r as _,h as w,c as y,b as h,a as g,F as f,j as b,g as C,e as k,o as q}from"./index.8a5f982a.js";const T=m({__name:"Authenticate",setup(v){const s=b(),a=C(),e=_({password:"",show:!1}),p=()=>{var o;console.log(d),console.log(e.password),console.log("grant_type=authorization_code&redirect_uri=oob&code="+s.query.code+"&client_id="+c()+"&client_secret="+l(i(),e.password));const r={grant_type:"authorization_code",redirect_uri:"oob",code:(o=s.query.code)==null?void 0:o.toString,client_id:c(),client_secret:l(i(),e.password)};fetch(d,{method:"POST",mode:"no-cors",headers:{Authorization:"Basic "+u(e.password),"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(r).map(([t,n])=>encodeURIComponent(t)+"="+encodeURIComponent(n)).join("&")}).then(t=>console.log(t)).catch(t=>{console.log(t),a.push("/")})};return w(()=>{console.log(s.query.code),s.query.code||a.push("/")}),(r,o)=>{const t=k("v-text-field");return q(),y(f,null,[h(t,{modelValue:e.password,"onUpdate:modelValue":o[0]||(o[0]=n=>e.password=n),"append-icon":e.show?"mdi-eye":"mdi-eye-off",type:e.show?"text":"password",name:"password",label:"Password","onClick:append":o[1]||(o[1]=n=>e.show=!e.show),placeholder:"Password",variant:"outlined"},null,8,["modelValue","append-icon","type"]),g("button",{onClick:p},"Submit")],64)}}});export{T as default};
